---
import { t } from '../../i18n/index.ts';

interface Props {
  lang: 'en' | 'de';
}

const { lang = 'en' } = Astro.props;
---

<div 
  id="imprint-panel" 
  class="tab-panel active" 
  role="tabpanel" 
  aria-labelledby="imprint-tab"
>
  <h3 id="title">{t('legalModal.imprint.title', lang)}</h3>

  <p id="legal-adress">
     {t('legalModal.imprint.legal-adress', lang)}
  </p>

  <h3 id="contact-title">{t('legalModal.imprint.contact.title', lang)}</h3>
  <p id="contact-content">
    {t('legalModal.imprint.contact.content', lang)}
  </p>

  <h3 id="taxId-title">
    {t('legalModal.imprint.contact.content', lang)}
  </h3>
  <p id="taxId-content">
    {t('legalModal.imprint.contact.content', lang)}
  </p>

  <h3 id="job-description-title">
    {t('legalModal.imprint.contact.content', lang)}
  </h3>
  <p id="job-description-content">
    {t('legalModal.imprint.contact.content', lang)}
  </p>
  <p id="job-awarded-in">
    {t('legalModal.imprint.contact.content', lang)}
  </p>
  <h3 id="regulations-title">
    {t('legalModal.imprint.contact.content', lang)}
  </h3>
  <p id="regulations-content">
    {t('legalModal.imprint.contact.content', lang)}
  </p>
</div>

<script>
  import { getTranslation, type Language } from '../../i18n';

  function initAboutSection() {
    // Update content on language change
    window.addEventListener('languageChange', (e: any) => {
      const lang = e.detail;
      const currentTranslations = getTranslation(lang).legalModal.imprint
      
      // Update content
      const title = document.getElementById('title');
      const legalAdress = document.getElementById('legal-adress');
      const contactTitle = document.getElementById('contact-title');
      const contactContent = document.getElementById('contact-content');
      const taxIdTitle = document.getElementById('taxId-title');
      const taxIdContent = document.getElementById('taxId-content');
      const jobDescriptionTitle = document.getElementById('job-description-title');
      const jobDescriptionContent = document.getElementById('job-description-content');
      const jobAwardedInContent = document.getElementById('job-awarded-in');
      const regulationsTitle = document.getElementById('regulations-title');
      const regulationsContent = document.getElementById('regulations-content');
      
      if (title) title.textContent = currentTranslations.title;
      if (legalAdress) legalAdress.textContent = currentTranslations.legalAdress;
      if (contactTitle) contactTitle.textContent = currentTranslations.contact.title;
      if (contactContent) contactContent.textContent = currentTranslations.contact.content;
      if (taxIdTitle) taxIdTitle.textContent = currentTranslations.taxId.title;
      if (taxIdContent) taxIdContent.textContent = currentTranslations.taxId.content;
      if (jobDescriptionTitle) jobDescriptionTitle.textContent = currentTranslations.jobDescriptionAndRegulations.title;
      if (jobDescriptionContent) jobDescriptionContent.textContent = currentTranslations.jobDescriptionAndRegulations.jobDescription;
      if (jobAwardedInContent) jobAwardedInContent.textContent = currentTranslations.jobDescriptionAndRegulations.awardedIn;
      if (regulationsTitle) regulationsTitle.textContent = currentTranslations.consumerResolutionAndUniversalArbitration.title;
      if (regulationsContent) regulationsContent.textContent = currentTranslations.consumerResolutionAndUniversalArbitration.content;}
    );
  }
  
  document.addEventListener('DOMContentLoaded', initAboutSection);
</script>

<style>
  .tab-panel {
    display: none;
  }
  
  .tab-panel.active {
    display: block;
    animation: fadeIn 0.3s ease;
  }
  
  .tab-panel h3 {
    margin-top: 0;
    margin-bottom: 1rem;
    color: var(--color-text-primary);
    font-size: 1.25rem;
  }
  
  .tab-panel p {
    line-height: 1.7;
    color: var(--color-text-secondary);
    margin-bottom: 1rem;
    white-space: pre-line;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .tab-panel h3 {
      font-size: 1.1rem;
    }
  }
  
  /* Accessibility improvements */
  @media (prefers-reduced-motion: reduce) {
    .tab-panel {
      animation: none;
    }
  }
</style>
